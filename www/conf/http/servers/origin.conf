# Copyright (C) 2019 by chrono

# Attention!
# You must modify your /etc/hosts
# 127.0.0.1 www.chrono.com
# 127.0.0.1   www.metroid.net
# Or else OpenResty will be blocked in resolving

server {
    listen 80;

    server_name  origin.io;

    access_log  logs/origin_access.log
                main buffer=2k flush=1s;

    allow 127.0.0.1;
    deny all;

    default_type text/html;

    location /gc {
        content_by_lua_block {
            ngx.say(string.format("GC: %dKB", collectgarbage("count")))
        }
    }

    location / {
        #return 200 "hello world by origin";
        default_type text/plain;
        content_by_lua_file lua/origin.lua;
    }
}

